package com.bukkit.dallen6.survivalgamesautomated;

import org.bukkit.Bukkit;
import org.bukkit.ChatColor;
import org.bukkit.Location;
import org.bukkit.Material;
import org.bukkit.block.Block;
import org.bukkit.command.Command;
import org.bukkit.command.CommandSender;
import org.bukkit.entity.Player;
import org.bukkit.event.Event;
import org.bukkit.plugin.PluginManager;
import org.bukkit.plugin.java.JavaPlugin;

import com.sk89q.worldedit.Vector;
import com.sk89q.worldedit.bukkit.WorldEditPlugin;
import com.sk89q.worldedit.bukkit.selections.CuboidSelection;
import com.sk89q.worldedit.bukkit.selections.Selection;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.logging.Logger;

public class SurvivalGamesAutomated extends JavaPlugin{
	
	
	private static final Logger log = Logger.getLogger("Minecraft");

@Override
public void onEnable(){
	
	PluginManager pm = Bukkit.getServer().getPluginManager();
	
	log.info("SurvivalGamesAutomated Enabled Sucessfully!");
}

@Override
public void onDisable(){
	log.info("SurvivalGamesAutomated Disabled!");
}




	public boolean onCommand(CommandSender sender, Command cmd, String []commandlabel, String[] args){
	
	
		Player player = (Player)sender;
		 
		if(cmd.getName().equalsIgnoreCase("sga")) {
			
			player.sendMessage("This is the main command for this plugin");
				
			
			 WorldEditPlugin worldEditPlugin = null;
             worldEditPlugin = (WorldEditPlugin) Bukkit.getServer().getPluginManager().getPlugin("WorldEdit");
             if(worldEditPlugin == null){
                 player.sendMessage("Error with region undoing! Error: WorldEdit is null.");   
             }
             Selection sel = worldEditPlugin.getSelection(player);
    
             if (sel instanceof CuboidSelection) {
                 Vector min = sel.getNativeMinimumPoint();
                 Vector max = sel.getNativeMaximumPoint();
                 for(int x = min.getBlockX();x <= max.getBlockX(); x=x+1){
                     for(int y = min.getBlockY();y <= max.getBlockY(); y=y+1){
                         for(int z = min.getBlockZ();z <= max.getBlockZ(); z=z+1){
                             Location tmpblock = new Location(player.getWorld(), x, y, z);
                             tmpblock.getBlock().setType(Material.AIR); //Just For debug
                         }
                     }
                 }
                 player.sendMessage(ChatColor.AQUA + "Undo Complete!");
             }else{
                 player.sendMessage(ChatColor.DARK_RED + "Invalid Selection!");
             }
			
	
		}
		return true;
	

		}}







